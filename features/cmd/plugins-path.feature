# language: ru

Функционал: Передача полного пути к платформе 1С
    Как Пользователь
    Я хочу иметь возможность указать каталог плагинов приложения
    Чтобы иметь возможность запускать синхронизацию с указанием каталога плагинов

Контекст: Тестовый контекст
    Когда Я очищаю параметры команды "gitsync" в контексте
    И Я устанавливаю путь выполнения команды "gitsync" к текущей библиотеке
    И Я создаю временный каталог и сохраняю его в переменной "РабочийКаталог"
    И Я устанавливаю рабочей каталог из переменной "РабочийКаталог"
    
Сценарий: Переменные среды
    Допустим Я собираю тестовый плагин и сохраняю в контекст "ПутьКФайлуПлагина"
    И Я создаю временный каталог и сохраняю его в переменной "КаталогПлагинов"
    И Я устанавливаю переменную окружения "GITSYNC_PLUGINS_PATH" из переменной "КаталогПлагинов"
    И Я добавляю параметр "plugins" для команды "gitsync"
    И Я добавляю параметр "install" для команды "gitsync"
    И Я добавляю параметр "-f" для команды "gitsync" из переменной "ПутьКФайлуПлагина"
    Когда Я выполняю команду "gitsync"
    И Я очищаю параметры команды "gitsync" в контексте
    И Я устанавливаю путь выполнения команды "gitsync" к текущей библиотеке
    И Я добавляю параметр "plugins" для команды "gitsync"
    И Я добавляю параметр "enable" для команды "gitsync"
    И Я добавляю параметр "test_plugin" для команды "gitsync"
    Когда Я выполняю команду "gitsync"
    Тогда Вывод команды "gitsync" не содержит "Внешнее исключение"
    И Код возврата команды "gitsync" равен 0
    И В каталоге "КаталогПлагинов" есть файлы плагинов
    И Я очищаю значение переменных окружения 
    |GITSYNC_PLUGINS_PATH|
   
Сценарий: Каталог приложения
    Допустим Я собираю тестовый плагин и сохраняю в контекст "ПутьКФайлуПлагина"
    И Я создаю каталог приложения в рабочем каталоге
    И Я добавляю параметр "plugins" для команды "gitsync"
    И Я добавляю параметр "install" для команды "gitsync"
    И Я добавляю параметр "-f" для команды "gitsync" из переменной "ПутьКФайлуПлагина"
    Когда Я выполняю команду "gitsync"
    И Я очищаю параметры команды "gitsync" в контексте
    И Я устанавливаю путь выполнения команды "gitsync" к текущей библиотеке
    И Я добавляю параметр "plugins" для команды "gitsync"
    И Я добавляю параметр "enable" для команды "gitsync"
    И Я добавляю параметр "test_plugin" для команды "gitsync"
    Когда Я выполняю команду "gitsync"
    Тогда Вывод команды "gitsync" не содержит "Внешнее исключение"
    И Код возврата команды "gitsync" равен 0
    И В каталоге "КаталогПлагинов" есть файлы плагинов
   
  